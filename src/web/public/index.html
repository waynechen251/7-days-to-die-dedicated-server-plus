<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <title>7DTD-DS-P 管理後台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/link.css" />
    <link rel="stylesheet" href="css/buttons.css" />
    <link rel="stylesheet" href="css/forms.css" />
    <link rel="stylesheet" href="css/cards.css" />
    <link rel="stylesheet" href="css/console.css" />
    <link rel="stylesheet" href="css/modal.css" />
    <link rel="stylesheet" href="css/mask.css" />
    <link rel="stylesheet" href="css/card-saves.css" />
    <link rel="stylesheet" href="css/cfg-modal.css" />
    <link rel="stylesheet" href="css/utilities.css" />
    <link rel="stylesheet" href="css/theme-dark.css" />
    <link rel="stylesheet" href="css/auth.css" />
  </head>
  <body>
    <div id="appMask" class="app-mask">
      <div class="app-mask__panel">
        <div class="app-mask__spinner" aria-hidden="true"></div>
        <div data-i18n="mask.connectionLost">無法與管理後台取得連線，請檢查服務狀態或稍候…</div>
      </div>
    </div>

    <div id="confirmMask" class="app-mask hidden" aria-hidden="true"></div>

    <!-- 登入頁面 -->
    <div id="loginScreen" class="auth-screen hidden">
      <div class="auth-panel">
        <div class="auth-logo">7DTD-DS-P</div>
        <h2 class="auth-title" data-i18n="auth.loginTitle">登入管理後台</h2>
        <div class="auth-error" id="authError"></div>
        <form id="loginForm" autocomplete="off">
          <div class="field">
            <label class="field__label" data-i18n="auth.username">帳戶名稱</label>
            <input type="text" id="authUsername" class="field__control" autocomplete="username" required />
          </div>
          <div class="field">
            <label class="field__label" data-i18n="auth.password">密碼</label>
            <input type="password" id="authPassword" class="field__control" autocomplete="current-password" required />
          </div>
          <button type="submit" class="btn--primary" data-i18n="auth.login">登入</button>
        </form>
      </div>
    </div>

    <!-- 首次設定頁面 -->
    <div id="setupScreen" class="auth-screen hidden">
      <div class="auth-panel">
        <div class="auth-logo">7DTD-DS-P</div>
        <h2 class="auth-title" data-i18n="auth.setupTitle">建立首個管理者帳戶</h2>
        <div class="auth-error" id="setupError"></div>
        <form id="setupForm" autocomplete="off">
          <div class="field">
            <label class="field__label" data-i18n="auth.username">帳戶名稱</label>
            <input type="text" id="setupUsername" class="field__control" autocomplete="off" required />
          </div>
          <div class="field">
            <label class="field__label" data-i18n="auth.password">密碼</label>
            <input type="password" id="setupPassword" class="field__control" autocomplete="off" required />
          </div>
          <div class="field">
            <label class="field__label" data-i18n="auth.confirmPassword">確認密碼</label>
            <input type="password" id="setupConfirmPassword" class="field__control" autocomplete="off" required />
          </div>
          <button type="submit" class="btn--primary" data-i18n="auth.setupBtn">建立帳戶</button>
        </form>
      </div>
    </div>

    <header class="topbar">
      <div class="brand" data-i18n="topbar.brand">
        7 Days To Die Dedicated Server Plus 管理後台
      </div>
      <div class="brand" id="appVersion">
        載入中...
      </div>
      <a
        id="updateBadge"
        class="update-badge hidden"
        href="#"
        target="_blank"
        rel="noopener noreferrer"
        data-i18n="update.newVersion"
        >新版本可用</a
      >
      <a
        href="https://github.com/waynechen251/7-days-to-die-dedicated-server-plus.git"
        target="_blank"
        rel="noopener noreferrer"
        class="github-link"
        >🌐 GitHub</a
      >
      <a
        href="https://forum.gamer.com.tw/C.php?bsn=24608&snA=2831&tnum=6"
        target="_blank"
        rel="noopener noreferrer"
        class="github-link"
        >🌐 巴哈姆特</a
      >
      <div class="topbar__actions">
        <div id="topbarUser" class="topbar__user"></div>
        <div class="lang-selector">
          <div data-i18n="topbar.langSelectLabel" style="margin-right: 0.5rem">
            顯示語言：
          </div>
          <select id="langSelect" class="lang-select">
          </select>
        </div>
      </div>
    </header>

    <div class="app-split">
      <div class="pane pane-main">
        <main class="grid">

          <!-- 管理後台 卡片 -->
          <div id="card-dsp" data-fragment="card-dsp"></div>

          <!-- 7DaysToDieServer 卡片 -->
          <div id="card-game" data-fragment="card-game"></div>

          <!-- 存檔管理 卡片 -->
          <div id="card-saves" data-fragment="card-saves"></div>
        </main>
      </div>

      <div id="splitResizer" class="split-resizer" title="拖曳調整高度" data-i18n-title="splitResizer.title"></div>

      <div class="pane pane-console">
        <div class="console-shell">
          <div class="console-bar">
            <div class="console-tabs">
              <button data-tab="system" class="active" data-i18n="console.tabSystem">管理後台</button>
              <button data-tab="steamcmd" data-i18n="console.tabSteamcmd">SteamCMD</button>
              <button data-tab="game" data-i18n="console.tabGame">7DaysToDieServer</button>
              <button data-tab="telnet" data-i18n="console.tabTelnet">Telnet</button>
              <button data-tab="backup" data-i18n="console.tabBackup">存檔管理</button>
            </div>
          </div>
          <div class="console-panes">
            <pre id="console-system" class="console active"></pre>
            <pre id="console-steamcmd" class="console"></pre>
            <pre id="console-game" class="console"></pre>
            <pre id="console-telnet" class="console"></pre>
            <pre id="console-backup" class="console"></pre>
          </div>
        </div>
      </div>
    </div>

    <div id="dspModalHost" data-fragment="card-dsp-modal"></div>
    <div
      id="gameServerconfigModalHost"
      data-fragment="card-game-serverconfig-modal"
    ></div>

    <noscript>
      <div class="modal" style="display: block">
        <div class="modal__backdrop"></div>
        <div class="modal__panel">
          <div class="modal__header"><h3 data-i18n="noscript.title">需要 JavaScript</h3></div>
          <div class="modal__body" data-i18n="noscript.message">請啟用瀏覽器的 JavaScript 後重新整理。</div>
        </div>
      </div>
    </noscript>

    <script defer src="js/fragments-loader.js"></script>
    <script defer src="js/utils.js"></script>
    <script defer src="js/i18n.js"></script>
    <script defer src="js/dom.js"></script>
    <script defer src="js/state.js"></script>
    <script defer src="js/api.js"></script>
    <script defer src="js/console.js"></script>
    <script defer src="js/mask.js"></script>
    <script defer src="js/confirm.js"></script>
    <script defer src="js/prompt.js"></script>
    <script defer src="js/status.js"></script>
    <script defer src="js/sse.js"></script>
    <script defer src="js/saves.js"></script>
    <script defer src="js/split.js"></script>
    <script defer src="js/card-game-serverconfig-modal.js"></script>
    <script defer src="js/card-dsp-modal.js"></script>
    <script defer src="js/actions.js"></script>
    <script defer src="js/auth.js"></script>
    <script defer src="js/bootstrap.js"></script>
  </body>
</html>
